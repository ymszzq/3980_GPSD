/*-------------------------------------------------------------------------------------------------------------------- SOURCE FILE: gpsprint.c - An module that will print the gps data in format.---- PROGRAM: gpsTerminal---- FUNCTIONS:void printGps(struct gps_data_t * gpsdata_ptr) ------ DATE: November 03, 2018------ DESIGNER: Ziqian Zhang---- PROGRAMMER: Ziqian Zhang---- NOTES:-- This module will get the data from gps_data_t struct, and then print the number of satellites, PRN, elevation,-- azimuth, SNR, used. If get fixed, this module will also print latitude, and longitude. This module is mainly -- used by readGps function in utils. ----------------------------------------------------------------------------------------------------------------------*/#include "gpsprint.h"/*-------------------------------------------------------------------------------------------------------------------- FUNCTION: printGps---- DATE: November 03, 2018------ DESIGNER: Ziqian Zhang---- PROGRAMMER: Ziqian Zhang---- INTERFACE: void printGps(struct gps_data_t * gpsdata_ptr)				struct gps_data_t * gpsdata_ptr: the struct containing all the gps information from GPSD API,						was sent from gps-utils---- RETURNS: void---- NOTES:--  This function is used to get gps data from GPSD API gps_data_t strct, and print them in format.--  The content include,the number of satellites, PRN, elevation, azimuth, SNR, used. If get fixed--  (fix mode is 2 or 3), this function will also print latitude, and longitude.----------------------------------------------------------------------------------------------------------------------*/void printGps(struct gps_data_t * gpsdata_ptr) {    int number_satellites = gpsdata_ptr - > satellites_visible;    printf("\nSatellites number: %d  ", gpsdata_ptr - > satellites_visible);    printf("Fix mode: %d  \n", gpsdata_ptr - > fix.mode);	/*Print satellites data*/    if (number_satellites > 0) {        for (int i = 0; i < number_satellites; i++) {            printf("PRN:%d\tElevation:%d\tAzimuth%d\tSNR%d\tUSED:%s\n", gpsdata_ptr - > skyview[i].PRN,                gpsdata_ptr - > skyview[i].elevation, gpsdata_ptr - > skyview[i].azimuth,                (int) gpsdata_ptr - > skyview[i].ss, gpsdata_ptr - > skyview[i].used ? "Y" : "N");        }    } else {        printf("Searching satellites.....\n");}	char scr[128];/*Convert time data to formatted time, and print*/if (isnan((float) gpsdata_ptr - > fix.time) == 0) {    (void) unix_to_iso8601(gpsdata_ptr - > fix.time, scr, sizeof(scr));    printf("Time %s  \n", scr);} else {    printf("Fail to get time\n");}/* Print the latitude if mode is 2 or 3. */if (gpsdata_ptr - > fix.mode >= MODE_2D && isnan((float) gpsdata_ptr - > fix.latitude) == 0) {    printf("Latitude:\t %f%c \n", fabs(gpsdata_ptr - > fix.latitude), (gpsdata_ptr - > fix.latitude < 0) ? 'S' : 'N');} else    printf(" n/a \n\n");/* Print the longitude if mode is 2 or 3. */if (gpsdata_ptr - > fix.mode >= MODE_2D && isnan((float) gpsdata_ptr - > fix.longitude) == 0) {    printf("Longitude:\t%f%c \n", fabs(gpsdata_ptr - > fix.longitude), (gpsdata_ptr - > fix.longitude < 0) ? 'W' : 'E');} else    printf(" n/a \n\n");}